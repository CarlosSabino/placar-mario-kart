<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MK World - Trio Scoreboard</title>
    <style>
        :root { --primary: #e74c3c; --bg: #0b0e14; --card: #1c2128; --text: #f0f6fc; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 15px; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 450px; background: var(--card); border-radius: 12px; padding: 20px; box-shadow: 0 8px 24px rgba(0,0,0,0.5); border: 1px solid #30363d; }
        h1 { color: var(--primary); text-align: center; font-size: 1.4rem; text-transform: uppercase; margin-bottom: 20px; border-bottom: 2px solid var(--primary); padding-bottom: 10px; }
        .player-card { display: flex; flex-direction: column; padding: 15px 0; border-bottom: 1px solid #30363d; }
        .player-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .player-name { font-size: 1.2rem; font-weight: bold; }
        .player-stats { display: flex; gap: 15px; font-size: 0.9rem; color: #8b949e; }
        .highlight { color: #f1c40f; font-weight: bold; font-size: 1.1rem; }
        .btn-group { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; }
        button { border: none; border-radius: 6px; padding: 10px; cursor: pointer; font-weight: bold; transition: 0.2s; color: white; }
        .p15 { background: #238636; } .p10 { background: #1f6feb; } .p5 { background: #8957e5; }
        .btn-record { background: #d29922; grid-column: span 3; margin-top: 5px; font-size: 0.8rem; }
        .reset-container { margin-top: 25px; display: flex; gap: 10px; }
        .btn-reset { background: #da3633; flex: 1; }
        #history { margin-top: 20px; width: 100%; font-size: 0.8rem; color: #8b949e; text-align: left; }
    </style>
</head>
<body>

    <div class="container">
        <h1>üèÅ MK World Trio</h1>
        <div id="app"></div>

        <div class="reset-container">
            <button class="btn-reset" onclick="resetAll()">Zerar Placar</button>
        </div>

        <div id="history">
            <strong>√öltimas A√ß√µes:</strong>
            <ul id="historyList"></ul>
        </div>
    </div>

    <script>
        let players = JSON.parse(localStorage.getItem('mk_trio_v2')) || [
            { name: "Carl√£o", score: 0, bestGlobal: '-' },
            { name: "Gu", score: 0, bestGlobal: '-' },
            { name: "Chic√£o", score: 0, bestGlobal: '-' }
        ];

        let history = JSON.parse(localStorage.getItem('mk_history')) || [];

        function save() {
            localStorage.setItem('mk_trio_v2', JSON.stringify(players));
            localStorage.setItem('mk_history', JSON.stringify(history));
            render();
        }

        function addScore(idx, pts) {
            players[idx].score += pts;
            history.unshift(`${players[idx].name} +${pts} pts`);
            if(history.length > 5) history.pop();
            save();
        }

        function setRecord(idx) {
            const pos = prompt(`Qual foi a posi√ß√£o global do ${players[idx].name} (1-24)?`);
            if(pos && !isNaN(pos)) {
                if(players[idx].bestGlobal === '-' || parseInt(pos) < parseInt(players[idx].bestGlobal)) {
                    players[idx].bestGlobal = pos;
                    alert("Novo Recorde Pessoal!");
                }
                save();
            }
        }

        function resetAll() {
            if(confirm("Deseja zerar todos os pontos e recordes?")) {
                players.forEach(p => { p.score = 0; p.bestGlobal = '-'; });
                history = [];
                save();
            }
        }

        function render() {
            const app = document.getElementById('app');
            const historyList = document.getElementById('historyList');
            
            // Ordena pelo score para o l√≠der ficar no topo
            const sorted = [...players].sort((a, b) => b.score - a.score);
            
            app.innerHTML = sorted.map(p => {
                const oIdx = players.findIndex(orig => orig.name === p.name);
                return `
                    <div class="player-card">
                        <div class="player-info">
                            <div class="player-name">${p.name}</div>
                            <div class="player-stats">
                                <span>Pontos: <span class="highlight">${p.score}</span></span>
                                <span>Recorde: <span style="color:#e74c3c">#${p.bestGlobal}</span></span>
                            </div>
                        </div>
                        <div class="btn-group">
                            <button class="p15" onclick="addScore(${oIdx}, 15)">+15</button>
                            <button class="p10" onclick="addScore(${oIdx}, 10)">+10</button>
                            <button class="p5" onclick="addScore(${oIdx}, 5)">+5</button>
                            <button class="btn-record" onclick="setRecord(${oIdx})">Registrar Posi√ß√£o Global (1-24)</button>
                        </div>
                    </div>
                `;
            }).join('');

            historyList.innerHTML = history.map(h => `<li>${h}</li>`).join('');
        }

        render();
    </script>
</body>
</html>
